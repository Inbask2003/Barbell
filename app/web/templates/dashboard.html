{% extends "base-page.html" %} {% set navbar = True %} {% set content_padding =
"" %} {% set page_numb = page_numb | default(0) %} {% set footer = false %} {%
block title %}{{ current_title }} - Dashboard{% endblock %} {% block content %}
<style>
    .sidebar {
        width: 250px;
        top: 56px;
        height: calc(100vh - 56px);
    }

    .main-dashboard {
        margin-left: calc(250px + 1em);
        margin-right: 1em;
        margin-top: 1em;
        margin-bottom: 1em;
    }

    .full-dash-height {
        height: calc(100vh - 56px - 3em);
    }

    @media (max-width: 991.98px) {
        /* Bootstrap lg breakpoint */
        .sidebar {
            position: relative;
            width: 100%;
            height: auto;
            top: 0;
        }

        .sidebar-toggle {
            top: calc(100vh - 38.85px);
            left: 0px;
            border-radius: 0px var(--bs-border-radius) 0px 0px;
        }

        .main-dashboard {
            margin-left: 0.5em;
        }
    }

    @media (max-width: 1199.98px) {
        .full-dash-height {
            height: auto;
        }
    }
</style>
<div class="d-flex">
    {% include "dashboard-sidebar.html" %}

    <div class="flex-grow-1 main-dashboard">
        <!-- Mobile toggle button -->
        <button
            class="btn position-fixed d-lg-none sidebar-toggle bg-primary"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#mobileSidebar"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        {% block dashboard %}{% endblock %}
    </div>
</div>

<script>
    document
        .getElementById("logoutLink")
        .addEventListener("click", async function (e) {
            e.preventDefault();
            try {
                await fetch("/auth/v1/logout", {
                    method: "GET",
                    credentials: "include",
                });
                window.location.href = "/login";
            } catch (err) {
                console.error("Logout failed", err);
            }
        });
</script>

{% endblock %} {% block post_content %} {% endblock %}
